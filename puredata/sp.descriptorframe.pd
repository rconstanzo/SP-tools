#N canvas 516 206 1540 858 12;
#X obj 45 22 inlet;
#X msg 229 166 startframe \$1;
#X msg 45 98 startframe \$1 \, bang;
#X obj 45 59 unpack f s;
#X obj 45 132 route bang startframe, f 53;
#X obj 1159 447 array define \$0-loudness 7;
#X obj 1159 474 array define \$0-loudness_scaled 7;
#X obj 938 218 fluid.bufloudness -features \$0-loudness -numchans 1 -windowsize 256 -hopsize 64 -truepeak 0 -numframes 256 -select loudness -padding 2 -blocking 2, f 50;
#X obj 970 325 fluid.bufscale -source \$0-loudness -destination \$0-loudness_scaled -inputlow -100 -inputhigh 0 -clipping 3 -blocking 2, f 48;
#X obj 938 387 fluid.bufstats -source \$0-loudness -stats \$0-loudness_stats -select mean -numchans 1 -numderivs 1 -blocking 2;
#X obj 1159 501 array define \$0-loudness_stats 2;
#X obj 938 466 array get \$0-loudness_stats;
#X msg 938 433 0;
#X obj 478 221 fluid.bufspectralshape -features \$0-spectralshape -fftsettings 256 64 512 -maxfftsize 4096 -numchans 1 -numframes 256 -power 1 -unit 1 -padding 2 -select centroid flatness -blocking 2;
#X obj 1159 535 clone fluid.multiarray 2 \$0-spectralshape 7;
#X obj 1159 560 clone fluid.multiarray 2 \$0-spectralshape_stats 2;
#X obj 1159 586 array define \$0-spectralshape_flattened 4;
#X msg 478 412 0;
#X obj 478 445 array get \$0-spectralshape_flattened;
#X obj 478 365 fluid.bufflatten -source \$0-spectralshape_stats -destination \$0-spectralshape_flattened -blocking 2;
#X obj 478 302 fluid.bufstats -source \$0-spectralshape -weights \$0-loudness_scaled -stats \$0-spectralshape_stats -select mean -numderivs 1 -blocking 2, f 61;
#X msg 478 478 \$1 \$3 \$2 \$4;
#X obj 45 167 t b b b;
#X obj 938 294 t b b;
#X obj 45 223 fluid.bufpitch -features \$0-pitch -fftsettings 256 64 256 -maxfftsize 4096 -numchans 1 -numframes 256 -unit 1 -padding 2 -minfreq 40 -blocking 2;
#X obj 1159 623 clone fluid.multiarray 2 \$0-pitch 7;
#X obj 45 286 fluid.bufstats -source \$0-pitch -weights \$0-loudness_scaled -stats \$0-pitch_stats -outlierscutoff 1.5 -select mid -blocking 2;
#X obj 1159 649 clone fluid.multiarray 2 \$0-pitch_stats 1;
#X obj 1160 675 array define \$0-pitch_flattened 2;
#X obj 45 349 fluid.bufflatten -source \$0-pitch_stats -destination \$0-pitch_flattened -blocking 2;
#X msg 90 443 0;
#X obj 90 477 array get \$0-pitch_flattened;
#X obj 90 512 unpack f f;
#X obj 125 552 sel -999;
#X msg 125 585 27.487;
#X obj 338 626 pack f f f f f f f f, f 56;
#X obj 938 501 unpack f f;
#X obj 478 513 unpack f f f f;
#X obj 313 797 outlet;
#X obj 478 133 list prepend source;
#X obj 478 172 route list;
#X obj 313 659 list;
#X obj 1161 704 array define \$0-descriptors 8;
#X obj 386 798 outlet;
#X obj 418 719 array set \$0-descriptors;
#X obj 386 682 t b l;
#X obj 386 758 symbol \$0-descriptors;
#X text 437 798 buffer outlet;
#X text 225 798 list outlet;
#X obj 44 408 t b b b;
#X connect 0 0 3 0;
#X connect 1 0 7 0;
#X connect 1 0 13 0;
#X connect 1 0 24 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 3 1 39 0;
#X connect 4 0 22 0;
#X connect 4 1 1 0;
#X connect 7 0 23 0;
#X connect 9 0 12 0;
#X connect 11 0 36 0;
#X connect 12 0 11 0;
#X connect 13 0 20 0;
#X connect 17 0 18 0;
#X connect 18 0 21 0;
#X connect 19 0 17 0;
#X connect 20 0 19 0;
#X connect 21 0 37 0;
#X connect 22 0 24 0;
#X connect 22 1 7 0;
#X connect 22 1 13 0;
#X connect 23 0 9 0;
#X connect 23 1 8 0;
#X connect 24 0 26 0;
#X connect 26 0 29 0;
#X connect 29 0 49 0;
#X connect 30 0 31 0;
#X connect 31 0 32 0;
#X connect 32 0 33 0;
#X connect 32 1 35 7;
#X connect 33 0 34 0;
#X connect 33 1 35 6;
#X connect 34 0 35 6;
#X connect 35 0 41 1;
#X connect 36 0 35 0;
#X connect 36 1 35 1;
#X connect 37 0 35 2;
#X connect 37 1 35 3;
#X connect 37 2 35 4;
#X connect 37 3 35 5;
#X connect 39 0 40 0;
#X connect 40 0 7 0;
#X connect 40 0 13 0;
#X connect 40 0 24 0;
#X connect 41 0 38 0;
#X connect 41 0 45 0;
#X connect 45 0 46 0;
#X connect 45 1 44 0;
#X connect 46 0 43 0;
#X connect 49 0 41 0;
#X connect 49 1 35 0;
#X connect 49 2 30 0;
