[object]
name = "sp.concatsynth~"
module = "SP-Tools"
category = ""
digest = "Realtime concatatentative synthesis"
seealso =  ['sp.concatcreate', 'sp.concatmatch', 'sp.concatplayer~', 'sp.concatsynth~']
description = "All-in-one realtime concatatentative synthesis."
discussion = """
    <h4><openfilelink filename="SP-Tools Overview.maxpat">Open the Overview Patch</openfilelink></h4>
    <p>The <o>sp.concatplayer~</o> object creates real-time audio mosaicking via concatatenative synthesis with a pre-analyzed concat corpus. <o>sp.concatsynth~</o> handles the audio analysis and nearest neighbor matching in a single object. </p>
"""

[metadata]
author = "Rodrigo Constanzo, Flucoma Project"
tags = ['Machine Learning', 'Drums']

[inlets]
[inlets.0]
type="signal"
digest="Audio and control in"
description="Audio input to be analyzed for concatenation/resynthesis."

[outlets]
[outlets.0]
type="signal"
digest="Audio output (left)"
description="Audio output (left)."

[outlets.1]
type="signal"
digest="Audio output (right)"
description="Audio output (right)."

[outlets.2]
type="list"
digest="Position and name outlet for <o>waveform~</o>"
description="Sends the <o>buffer~</o> name and playback position to be used with <o>waveform~</o>."

[messages.load]
digest = "Load a pre-trained concat <b>.json</b> file"
description = "Opens file dialog to select pre-trained concat <b>.json</b> file."

[messages.read]
digest = "Read a pre-trained concat <b>.json</b> file"
description = "Reads a pre-trained concat <b>.json</b> file directly from a relative or absolute path."

[messages.print]
digest = "Print summary info to Max console"
description = "Prints summary info including overall statistics to the Max console."

[messages.rate]
digest = "Rate of concatenation"
description = "Rate of matching/playback in <b>ms</b> in the concatenation engine."

[messages.random]
digest = "Enable random rate matching"
description = "Enable random variation to the matching/concatenation."

[messages.voices]
digest = "Amount of polyphony"
description = "Sets the amount of polyphony available for sample playback."

[messages.steal]
digest = "Whether poly voice stealing is enabled"
description = "Sets whether voice stealing is enabled, which allows new samples to start when previous ones are still sounding."

[messages.speed]
digest = "Playback speed"
description = "Sets the playback speed for each individual grain."

[messages.window]
digest = "Window function for playback"
description = """
Sets the window function for the grain playback."
The available options are:<br/>
<b>sine</b><br/>
<b>hann</b><br/>
<b>triangle</b><br/>
<b>rampdown</b><br/>
<b>rampup</b><br/>
<b>onset</b><br/>
<b>hamming</b><br/>
<b>blackman</b><br/>
<b>square</b>
"""

[attributes]
[attributes.voices]
digest = "Amount of polyphony"
description = "Sets the amount of polyphony available for sample playback."
default = { value=64, type="int", size=1 }

[attributes.steal]
digest = "Whether poly voice stealing is enabled"
description = "Sets whether voice stealing is enabled, which allows new samples to start when previous ones are still sounding."
default = { value=1, type="int", size=1 }

[attributes.rate]
digest = "Rate of concatenation"
description = "Rate of matching/playback in <b>ms</b> in the concatenation engine."
default = { value=100.0, type="float", size=1 }

[attributes.random]
digest = "Enable random rate matching"
description = "Enable random variation to the matching/concatenation."
default = { value=0, type="int", size=1 }

[attributes.speed]
digest = "Playback speed"
description = "Sets the playback speed for each individual grain."
default = { value=100, type="float", size=1 }

[attributes.width]
digest = "Panning width"
description = "Sets the random distribution width for the grain panning."
default = { value=100, type="float", size=1 }

[attributes.window]
digest = "Window function for playback"
description = """
Sets the window function for the grain playback."
The available options are:<br/>
<b>sine</b><br/>
<b>hann</b><br/>
<b>triangle</b><br/>
<b>rampdown</b><br/>
<b>rampup</b><br/>
<b>onset</b><br/>
<b>hamming</b><br/>
<b>blackman</b><br/>
<b>square</b>
"""
default = { value="sine", type="symbol", size=1 }