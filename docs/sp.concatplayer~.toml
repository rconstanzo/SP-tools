[object]
name = "sp.concatplayer~"
module = "SP-Tools"
category = ""
digest = "Granular playback engine"
seealso =  ['sp.concatcreate', 'sp.concatmatch', 'sp.concatplayer~', 'sp.concatsynth~']
description = "Granular playback engine for concatenative synthesis."
discussion = """
    <h4><openfilelink filename="SP-Tools Overview.maxpat">Open the Overview Patch</openfilelink></h4>
    <p>The <o>sp.concatplayer~</o> object is the underlying playback engine for <o>sp.concatsynth~</o>. It is a stripped back granular synth engine that plays back small and windowed fragments of a single large <o>buffer~</o> unlike the corpus-based playback elsewhere in SP-Tools.</p>
"""

[metadata]
author = "Rodrigo Constanzo, Flucoma Project"
tags = ['Machine Learning', 'Drums']

[inlets]
[inlets.0]
type="list"
digest="Position and <o>buffer~</o> to play from"
description="Position (offset in <b>ms</b>) and <o>buffer~</o> name to play back from."

[outlets]
[outlets.0]
type="signal"
digest="Audio output (left)"
description="Audio output (left)."

[outlets.1]
type="signal"
digest="Audio output (right)"
description="Audio output (right)."

[messages.load]
digest = "Load a pre-trained concat <b>.json</b> file"
description = "Opens file dialog to select pre-trained concat <b>.json</b> file."

[messages.read]
digest = "Read a pre-trained concat <b>.json</b> file"
description = "Reads a pre-trained concat <b>.json</b> file directly from a relative or absolute path."

[messages.print]
digest = "Print summary info to Max console"
description = "Prints summary info including overall statistics to the Max console."

[messages.rate]
digest = "Rate of concatenation"
description = "Rate of matching/playback in <b>ms</b> in the concatenation engine."

[messages.voices]
digest = "Amount of polyphony"
description = "Sets the amount of polyphony available for sample playback."

[messages.steal]
digest = "Whether poly voice stealing is enabled"
description = "Sets whether voice stealing is enabled, which allows new samples to start when previous ones are still sounding."

[messages.speed]
digest = "Playback speed"
description = "Sets the playback speed for each individual grain."

[messages.window]
digest = "Window function for playback"
description = """
Sets the window function for the grain playback."
The available options are:<br/>
<b>sine</b><br/>
<b>hann</b><br/>
<b>triangle</b><br/>
<b>rampdown</b><br/>
<b>rampup</b><br/>
<b>onset</b><br/>
<b>hamming</b><br/>
<b>blackman</b><br/>
<b>square</b>
"""

[attributes]
[attributes.voices]
digest = "Amount of polyphony"
description = "Sets the amount of polyphony available for sample playback."
default = { value=64, type="int", size=1 }

[attributes.steal]
digest = "Whether poly voice stealing is enabled"
description = "Sets whether voice stealing is enabled, which allows new samples to start when previous ones are still sounding."
default = { value=1, type="int", size=1 }

[attributes.rate]
digest = "Rate of concatenation"
description = "Rate of matching/playback in <b>ms</b> in the concatenation engine."
default = { value=100.0, type="float", size=1 }

[attributes.speed]
digest = "Playback speed"
description = "Sets the playback speed for each individual grain."
default = { value=100, type="float", size=1 }

[attributes.width]
digest = "Panning width"
description = "Sets the random distribution width for the grain panning."
default = { value=100, type="float", size=1 }

[attributes.window]
digest = "Window function for playback"
description = """
Sets the window function for the grain playback."
The available options are:<br/>
<b>sine</b><br/>
<b>hann</b><br/>
<b>triangle</b><br/>
<b>rampdown</b><br/>
<b>rampup</b><br/>
<b>onset</b><br/>
<b>hamming</b><br/>
<b>blackman</b><br/>
<b>square</b>
"""
default = { value="sine", type="symbol", size=1 }